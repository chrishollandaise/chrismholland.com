---
const { articles, head, includeProjectTag = true, limit = -1 } = Astro.props;
import DraftTag from "../components/DraftTag.astro";
---

<table>
    <thead>
        {
            head ? (
                head.map((label: string[]) => {
                    return <th>{label}</th>;
                })
            ) : (
                <>
                    <th>Date</th>
                    <th>Article</th>
                    <th>Tags</th>
                </>
            )
        }
    </thead>
    <tbody>
        {
            articles.map((post: any) => (
                <tr>
                    <td>
                        {new Date(post.data.pubDate).toLocaleDateString(
                            "en-US",
                        )}
                    </td>
                    <td>
                        <a href={`blog/${post.slug}`}>
                            {post.data.title}{" "}
                            <DraftTag isDraft={post.data.draft} />
                        </a>
                    </td> 
                    <td>
                        {post.data.tags.map((tag: any) => (
                            <a href={`/tags/${tag}`}>
                                {includeProjectTag || tag !== "project" ? (
                                    <code>{tag}</code>
                                ) : null}
                            </a>
                        ))}
                    </td>
                </tr>
            ))
        }
    </tbody>
</table>
